2025-04-11 10:23:10,407 [INFO] Приложение запущено
2025-04-11 10:23:10,487 [DEBUG] Using selector: EpollSelector
2025-04-11 10:23:11,995 [INFO] select pg_catalog.version()
2025-04-11 10:23:11,995 [INFO] [raw sql] ()
2025-04-11 10:23:11,996 [INFO] select current_schema()
2025-04-11 10:23:11,996 [INFO] [raw sql] ()
2025-04-11 10:23:11,997 [INFO] show standard_conforming_strings
2025-04-11 10:23:11,997 [INFO] [raw sql] ()
2025-04-11 10:23:11,997 [INFO] BEGIN (implicit)
2025-04-11 10:23:12,000 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,000 [INFO] [generated in 0.00015s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,002 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,002 [INFO] [cached since 0.002592s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,003 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,003 [INFO] [cached since 0.003102s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,003 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,003 [INFO] [cached since 0.003605s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,003 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,004 [INFO] [cached since 0.004077s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,004 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,004 [INFO] [cached since 0.004571s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,004 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,004 [INFO] [cached since 0.005006s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,005 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:23:12,005 [INFO] [cached since 0.005329s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:23:12,005 [INFO] COMMIT
2025-04-11 10:23:12,006 [INFO] BEGIN (implicit)
2025-04-11 10:23:12,024 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:23:12,024 [INFO] [generated in 0.00041s] ()
2025-04-11 10:23:12,027 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:23:12,027 [INFO] [generated in 0.00013s] ()
2025-04-11 10:23:12,028 [INFO] ROLLBACK
2025-04-11 10:23:12,028 [INFO] Start polling
2025-04-11 10:23:12,156 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:23:30,455 [INFO] BEGIN (implicit)
2025-04-11 10:23:30,455 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:23:30,455 [INFO] [generated in 0.00014s] ('main',)
2025-04-11 10:23:31,012 [INFO] ROLLBACK
2025-04-11 10:23:31,012 [INFO] Update id=734890204 is handled. Duration 558 ms by bot id=7443088052
2025-04-11 10:23:32,390 [INFO] BEGIN (implicit)
2025-04-11 10:23:32,391 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:23:32,391 [INFO] [cached since 1.935s ago] ('catalog',)
2025-04-11 10:23:32,392 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:23:32,392 [INFO] [cached since 20.37s ago] ()
2025-04-11 10:23:32,750 [INFO] ROLLBACK
2025-04-11 10:23:32,751 [INFO] Update id=734890205 is handled. Duration 360 ms by bot id=7443088052
2025-04-11 10:23:33,872 [INFO] BEGIN (implicit)
2025-04-11 10:23:33,874 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:23:33,874 [INFO] [generated in 0.00013s] (5,)
2025-04-11 10:23:33,877 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:23:33,877 [INFO] [generated in 0.00016s] (1,)
2025-04-11 10:23:33,879 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:23:33,879 [INFO] [generated in 0.00022s] (5,)
2025-04-11 10:23:34,253 [INFO] ROLLBACK
2025-04-11 10:23:34,254 [INFO] Update id=734890206 is handled. Duration 381 ms by bot id=7443088052
2025-04-11 10:23:37,139 [INFO] BEGIN (implicit)
2025-04-11 10:23:37,139 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:23:37,139 [INFO] [cached since 6.684s ago] ('catalog',)
2025-04-11 10:23:37,140 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:23:37,140 [INFO] [cached since 25.12s ago] ()
2025-04-11 10:23:37,579 [INFO] ROLLBACK
2025-04-11 10:23:37,579 [INFO] Update id=734890207 is handled. Duration 440 ms by bot id=7443088052
2025-04-11 10:23:38,999 [INFO] BEGIN (implicit)
2025-04-11 10:23:38,999 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:23:39,000 [INFO] [cached since 5.125s ago] (7,)
2025-04-11 10:23:39,001 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:23:39,001 [INFO] [cached since 5.124s ago] (1,)
2025-04-11 10:23:39,001 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:23:39,001 [INFO] [cached since 5.122s ago] (7,)
2025-04-11 10:23:39,306 [INFO] ROLLBACK
2025-04-11 10:23:39,307 [INFO] Update id=734890208 is handled. Duration 308 ms by bot id=7443088052
2025-04-11 10:23:42,505 [INFO] BEGIN (implicit)
2025-04-11 10:23:42,506 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:23:42,506 [INFO] [generated in 0.00012s] (6903748145,)
2025-04-11 10:23:42,508 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:23:42,508 [INFO] [generated in 0.00011s] (6903748145, 3)
2025-04-11 10:23:42,510 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:23:42,510 [INFO] [generated in 0.00011s] (6903748145, 3, 1)
2025-04-11 10:23:42,511 [INFO] COMMIT
2025-04-11 10:23:42,732 [INFO] Update id=734890209 is handled. Duration 227 ms by bot id=7443088052
2025-04-11 10:23:44,595 [INFO] BEGIN (implicit)
2025-04-11 10:23:44,595 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:23:44,595 [INFO] [cached since 14.14s ago] ('catalog',)
2025-04-11 10:23:44,596 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:23:44,596 [INFO] [cached since 32.57s ago] ()
2025-04-11 10:23:44,866 [INFO] ROLLBACK
2025-04-11 10:23:44,867 [INFO] Update id=734890210 is handled. Duration 271 ms by bot id=7443088052
2025-04-11 10:23:47,865 [INFO] BEGIN (implicit)
2025-04-11 10:23:47,866 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:23:47,866 [INFO] [cached since 13.99s ago] (6,)
2025-04-11 10:23:47,867 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:23:47,867 [INFO] [cached since 13.99s ago] (1,)
2025-04-11 10:23:47,867 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:23:47,867 [INFO] [cached since 13.99s ago] (6,)
2025-04-11 10:23:48,219 [INFO] ROLLBACK
2025-04-11 10:23:48,219 [INFO] Update id=734890211 is handled. Duration 354 ms by bot id=7443088052
2025-04-11 10:23:52,459 [INFO] BEGIN (implicit)
2025-04-11 10:23:52,459 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:23:52,459 [INFO] [cached since 9.953s ago] (6903748145,)
2025-04-11 10:23:52,460 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:23:52,460 [INFO] [cached since 9.952s ago] (6903748145, 2)
2025-04-11 10:23:52,461 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:23:52,461 [INFO] [cached since 9.951s ago] (6903748145, 2, 1)
2025-04-11 10:23:52,461 [INFO] COMMIT
2025-04-11 10:23:52,714 [INFO] Update id=734890212 is handled. Duration 255 ms by bot id=7443088052
2025-04-11 10:23:57,575 [INFO] BEGIN (implicit)
2025-04-11 10:23:57,575 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:23:57,576 [INFO] [cached since 27.12s ago] ('catalog',)
2025-04-11 10:23:57,577 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:23:57,577 [INFO] [cached since 45.55s ago] ()
2025-04-11 10:23:57,887 [INFO] ROLLBACK
2025-04-11 10:23:57,888 [INFO] Update id=734890213 is handled. Duration 312 ms by bot id=7443088052
2025-04-11 10:23:59,130 [INFO] BEGIN (implicit)
2025-04-11 10:23:59,130 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:23:59,130 [INFO] [cached since 25.26s ago] (8,)
2025-04-11 10:23:59,131 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:23:59,131 [INFO] [cached since 25.25s ago] (1,)
2025-04-11 10:23:59,132 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:23:59,132 [INFO] [cached since 25.25s ago] (8,)
2025-04-11 10:23:59,454 [INFO] ROLLBACK
2025-04-11 10:23:59,454 [INFO] Update id=734890214 is handled. Duration 324 ms by bot id=7443088052
2025-04-11 10:24:03,387 [INFO] BEGIN (implicit)
2025-04-11 10:24:03,388 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:24:03,388 [INFO] [cached since 20.88s ago] (6903748145,)
2025-04-11 10:24:03,389 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:24:03,389 [INFO] [cached since 20.88s ago] (6903748145, 6)
2025-04-11 10:24:03,389 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:24:03,389 [INFO] [cached since 20.88s ago] (6903748145, 6, 1)
2025-04-11 10:24:03,390 [INFO] COMMIT
2025-04-11 10:24:03,638 [INFO] Update id=734890215 is handled. Duration 251 ms by bot id=7443088052
2025-04-11 10:24:04,743 [INFO] BEGIN (implicit)
2025-04-11 10:24:04,745 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:24:04,745 [INFO] [generated in 0.00013s] (6903748145,)
2025-04-11 10:24:05,124 [INFO] ROLLBACK
2025-04-11 10:24:05,124 [INFO] Update id=734890216 is handled. Duration 381 ms by bot id=7443088052
2025-04-11 10:24:21,632 [INFO] BEGIN (implicit)
2025-04-11 10:24:21,633 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:24:21,633 [INFO] [cached since 39.13s ago] (6903748145,)
2025-04-11 10:24:21,894 [INFO] ROLLBACK
2025-04-11 10:24:21,894 [INFO] Update id=734890217 is handled. Duration 262 ms by bot id=7443088052
2025-04-11 10:24:23,484 [INFO] BEGIN (implicit)
2025-04-11 10:24:23,484 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:24:23,484 [INFO] [cached since 40.98s ago] (6903748145,)
2025-04-11 10:24:23,684 [INFO] ROLLBACK
2025-04-11 10:24:23,685 [INFO] Update id=734890218 is handled. Duration 201 ms by bot id=7443088052
2025-04-11 10:24:24,978 [INFO] BEGIN (implicit)
2025-04-11 10:24:24,979 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:24:24,979 [INFO] [cached since 42.47s ago] (6903748145,)
2025-04-11 10:24:24,980 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:24:24,980 [INFO] [cached since 20.24s ago] (6903748145,)
2025-04-11 10:24:24,981 [INFO] INSERT INTO "order" (user_id, delivery_address, total_price, status, created, updated) VALUES ($1::BIGINT, $2::VARCHAR, $3::NUMERIC(5, 2), $4::VARCHAR, now(), now()) RETURNING "order".id, "order".created, "order".updated
2025-04-11 10:24:24,981 [INFO] [generated in 0.00013s] (6903748145, '30.088782, 31.298302', Decimal('144.00'), 'оформлен')
2025-04-11 10:24:24,983 [INFO] UPDATE product SET quantity=$1::INTEGER, updated=now() WHERE product.id = $2::INTEGER
2025-04-11 10:24:24,983 [INFO] [generated in 0.00012s] [(0, 2), (1, 6)]
2025-04-11 10:24:24,985 [INFO] DELETE FROM cart WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:24:24,985 [INFO] [generated in 0.00012s] (6903748145, 3)
2025-04-11 10:24:24,986 [INFO] COMMIT
2025-04-11 10:24:25,103 [INFO] BEGIN (implicit)
2025-04-11 10:24:25,104 [INFO] INSERT INTO order_item (order_id, product_id, quantity, created, updated) SELECT p0::INTEGER, p1::INTEGER, p2::INTEGER, p3::TIMESTAMP WITHOUT TIME ZONE, p4::TIMESTAMP WITHOUT TIME ZONE FROM (VALUES ($1::INTEGER, $2::INTEGER, $3::INTEGER, now(), now(), 0), ($4::INTEGER, $5::INTEGER, $6::INTEGER, now(), now(), 1)) AS imp_sen(p0, p1, p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING order_item.id, order_item.created, order_item.updated, order_item.id AS id__1
2025-04-11 10:24:25,104 [INFO] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] (10, 2, 1, 10, 6, 1)
2025-04-11 10:24:25,105 [INFO] DELETE FROM cart WHERE cart.user_id = $1::BIGINT
2025-04-11 10:24:25,106 [INFO] [generated in 0.00010s] (6903748145,)
2025-04-11 10:24:25,106 [INFO] COMMIT
2025-04-11 10:24:25,687 [INFO] Update id=734890219 is handled. Duration 709 ms by bot id=7443088052
2025-04-11 10:31:09,145 [INFO] Приложение запущено
2025-04-11 10:31:09,151 [DEBUG] Using selector: EpollSelector
2025-04-11 10:31:09,578 [INFO] select pg_catalog.version()
2025-04-11 10:31:09,578 [INFO] [raw sql] ()
2025-04-11 10:31:09,579 [INFO] select current_schema()
2025-04-11 10:31:09,579 [INFO] [raw sql] ()
2025-04-11 10:31:09,580 [INFO] show standard_conforming_strings
2025-04-11 10:31:09,580 [INFO] [raw sql] ()
2025-04-11 10:31:09,580 [INFO] BEGIN (implicit)
2025-04-11 10:31:09,583 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,583 [INFO] [generated in 0.00018s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,585 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,585 [INFO] [cached since 0.002327s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,586 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,586 [INFO] [cached since 0.003084s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,586 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,586 [INFO] [cached since 0.003636s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,587 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,587 [INFO] [cached since 0.004118s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,587 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,587 [INFO] [cached since 0.004602s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,588 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,588 [INFO] [cached since 0.004969s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,588 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:31:09,588 [INFO] [cached since 0.005238s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:31:09,588 [INFO] COMMIT
2025-04-11 10:31:09,589 [INFO] BEGIN (implicit)
2025-04-11 10:31:09,604 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:31:09,605 [INFO] [generated in 0.00018s] ()
2025-04-11 10:31:09,607 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:31:09,607 [INFO] [generated in 0.00023s] ()
2025-04-11 10:31:09,608 [INFO] ROLLBACK
2025-04-11 10:31:09,608 [INFO] Start polling
2025-04-11 10:31:09,694 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:31:46,452 [INFO] Update id=734890220 is handled. Duration 501 ms by bot id=7443088052
2025-04-11 10:32:13,688 [INFO] BEGIN (implicit)
2025-04-11 10:32:13,688 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:13,689 [INFO] [generated in 0.00014s] ('main',)
2025-04-11 10:32:13,844 [INFO] ROLLBACK
2025-04-11 10:32:13,845 [INFO] Update id=734890221 is handled. Duration 157 ms by bot id=7443088052
2025-04-11 10:32:18,441 [INFO] BEGIN (implicit)
2025-04-11 10:32:18,441 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:18,441 [INFO] [cached since 4.753s ago] ('catalog',)
2025-04-11 10:32:18,442 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:32:18,442 [INFO] [cached since 68.84s ago] ()
2025-04-11 10:32:18,802 [INFO] ROLLBACK
2025-04-11 10:32:18,803 [INFO] Update id=734890222 is handled. Duration 362 ms by bot id=7443088052
2025-04-11 10:32:19,576 [INFO] BEGIN (implicit)
2025-04-11 10:32:19,579 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:32:19,579 [INFO] [generated in 0.00014s] (6903748145,)
2025-04-11 10:32:19,580 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:19,580 [INFO] [cached since 5.892s ago] ('cart',)
2025-04-11 10:32:19,820 [INFO] ROLLBACK
2025-04-11 10:32:19,820 [INFO] Update id=734890223 is handled. Duration 244 ms by bot id=7443088052
2025-04-11 10:32:20,879 [INFO] BEGIN (implicit)
2025-04-11 10:32:20,880 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:20,880 [INFO] [cached since 7.191s ago] ('main',)
2025-04-11 10:32:21,221 [INFO] ROLLBACK
2025-04-11 10:32:21,222 [INFO] Update id=734890224 is handled. Duration 342 ms by bot id=7443088052
2025-04-11 10:32:24,261 [INFO] BEGIN (implicit)
2025-04-11 10:32:24,261 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:32:24,261 [INFO] [cached since 4.683s ago] (6903748145,)
2025-04-11 10:32:24,262 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:24,262 [INFO] [cached since 10.57s ago] ('cart',)
2025-04-11 10:32:24,640 [INFO] ROLLBACK
2025-04-11 10:32:24,640 [INFO] Update id=734890225 is handled. Duration 380 ms by bot id=7443088052
2025-04-11 10:32:25,487 [INFO] BEGIN (implicit)
2025-04-11 10:32:25,487 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:25,487 [INFO] [cached since 11.8s ago] ('main',)
2025-04-11 10:32:25,966 [INFO] ROLLBACK
2025-04-11 10:32:25,966 [INFO] Update id=734890226 is handled. Duration 479 ms by bot id=7443088052
2025-04-11 10:32:27,461 [INFO] BEGIN (implicit)
2025-04-11 10:32:27,461 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:32:27,461 [INFO] [cached since 13.77s ago] ('catalog',)
2025-04-11 10:32:27,462 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:32:27,462 [INFO] [cached since 77.86s ago] ()
2025-04-11 10:32:27,759 [INFO] ROLLBACK
2025-04-11 10:32:27,760 [INFO] Update id=734890227 is handled. Duration 299 ms by bot id=7443088052
2025-04-11 10:32:29,852 [INFO] BEGIN (implicit)
2025-04-11 10:32:29,854 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:32:29,854 [INFO] [generated in 0.00013s] (8,)
2025-04-11 10:32:29,856 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:32:29,856 [INFO] [generated in 0.00015s] (8,)
2025-04-11 10:32:29,857 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:32:29,857 [INFO] [generated in 0.00014s] (1,)
2025-04-11 10:32:30,328 [INFO] ROLLBACK
2025-04-11 10:32:30,328 [INFO] Update id=734890228 is handled. Duration 477 ms by bot id=7443088052
2025-04-11 10:32:31,942 [INFO] BEGIN (implicit)
2025-04-11 10:32:31,943 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:32:31,943 [INFO] [generated in 0.00012s] (6903748145,)
2025-04-11 10:32:31,944 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:32:31,944 [INFO] [generated in 0.00011s] (6903748145, 4)
2025-04-11 10:32:31,946 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:32:31,946 [INFO] [generated in 0.00012s] (6903748145, 4, 1)
2025-04-11 10:32:31,947 [INFO] COMMIT
2025-04-11 10:32:32,173 [INFO] Update id=734890229 is handled. Duration 231 ms by bot id=7443088052
2025-04-11 10:32:34,102 [INFO] BEGIN (implicit)
2025-04-11 10:32:34,102 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:32:34,102 [INFO] [cached since 14.52s ago] (6903748145,)
2025-04-11 10:32:34,392 [INFO] ROLLBACK
2025-04-11 10:32:34,392 [INFO] Update id=734890230 is handled. Duration 290 ms by bot id=7443088052
2025-04-11 10:32:36,596 [INFO] BEGIN (implicit)
2025-04-11 10:32:36,597 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:32:36,597 [INFO] [cached since 4.654s ago] (6903748145,)
2025-04-11 10:32:36,725 [INFO] ROLLBACK
2025-04-11 10:32:36,726 [INFO] Update id=734890231 is handled. Duration 129 ms by bot id=7443088052
2025-04-11 10:32:38,311 [INFO] BEGIN (implicit)
2025-04-11 10:32:38,312 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:32:38,312 [INFO] [cached since 6.369s ago] (6903748145,)
2025-04-11 10:32:38,511 [INFO] ROLLBACK
2025-04-11 10:32:38,512 [INFO] Update id=734890232 is handled. Duration 201 ms by bot id=7443088052
2025-04-11 10:32:39,745 [INFO] BEGIN (implicit)
2025-04-11 10:32:39,746 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:32:39,746 [INFO] [cached since 7.803s ago] (6903748145,)
2025-04-11 10:32:39,747 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:32:39,747 [INFO] [cached since 20.17s ago] (6903748145,)
2025-04-11 10:32:39,748 [INFO] INSERT INTO "order" (user_id, delivery_address, total_price, status, created, updated) VALUES ($1::BIGINT, $2::VARCHAR, $3::NUMERIC(5, 2), $4::VARCHAR, now(), now()) RETURNING "order".id, "order".created, "order".updated
2025-04-11 10:32:39,748 [INFO] [generated in 0.00011s] (6903748145, '30.088782, 31.298302', Decimal('450.00'), 'оформлен')
2025-04-11 10:32:39,750 [INFO] UPDATE product SET quantity=$1::INTEGER, updated=now() WHERE product.id = $2::INTEGER
2025-04-11 10:32:39,750 [INFO] [generated in 0.00011s] (1, 4)
2025-04-11 10:32:39,751 [INFO] INSERT INTO order_item (order_id, product_id, quantity, created, updated) VALUES ($1::INTEGER, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING order_item.id, order_item.created, order_item.updated
2025-04-11 10:32:39,751 [INFO] [generated in 0.00015s] (11, 4, 1)
2025-04-11 10:32:39,753 [INFO] DELETE FROM cart WHERE cart.user_id = $1::BIGINT
2025-04-11 10:32:39,753 [INFO] [generated in 0.00018s] (6903748145,)
2025-04-11 10:32:39,754 [INFO] COMMIT
2025-04-11 10:32:40,130 [INFO] Update id=734890233 is handled. Duration 385 ms by bot id=7443088052
2025-04-11 10:36:32,961 [INFO] Приложение запущено
2025-04-11 10:36:33,037 [DEBUG] Using selector: EpollSelector
2025-04-11 10:36:33,528 [INFO] select pg_catalog.version()
2025-04-11 10:36:33,528 [INFO] [raw sql] ()
2025-04-11 10:36:33,530 [INFO] select current_schema()
2025-04-11 10:36:33,530 [INFO] [raw sql] ()
2025-04-11 10:36:33,530 [INFO] show standard_conforming_strings
2025-04-11 10:36:33,530 [INFO] [raw sql] ()
2025-04-11 10:36:33,531 [INFO] BEGIN (implicit)
2025-04-11 10:36:33,533 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,533 [INFO] [generated in 0.00016s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,535 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,535 [INFO] [cached since 0.00179s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,535 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,535 [INFO] [cached since 0.002368s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,536 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,536 [INFO] [cached since 0.002833s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,536 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,536 [INFO] [cached since 0.003266s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,536 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,537 [INFO] [cached since 0.003666s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,537 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,537 [INFO] [cached since 0.004074s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,537 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:36:33,537 [INFO] [cached since 0.004417s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:36:33,538 [INFO] COMMIT
2025-04-11 10:36:33,539 [INFO] BEGIN (implicit)
2025-04-11 10:36:33,554 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:36:33,554 [INFO] [generated in 0.00020s] ()
2025-04-11 10:36:33,556 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:36:33,557 [INFO] [generated in 0.00011s] ()
2025-04-11 10:36:33,557 [INFO] ROLLBACK
2025-04-11 10:36:33,557 [INFO] Start polling
2025-04-11 10:36:33,668 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:36:45,057 [INFO] BEGIN (implicit)
2025-04-11 10:36:45,057 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:36:45,058 [INFO] [generated in 0.00013s] ('main',)
2025-04-11 10:36:45,535 [INFO] ROLLBACK
2025-04-11 10:36:45,535 [INFO] Update id=734890234 is handled. Duration 479 ms by bot id=7443088052
2025-04-11 10:36:51,283 [INFO] BEGIN (implicit)
2025-04-11 10:36:51,283 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:36:51,283 [INFO] [cached since 6.226s ago] ('catalog',)
2025-04-11 10:36:51,284 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:36:51,284 [INFO] [cached since 17.73s ago] ()
2025-04-11 10:36:51,553 [INFO] ROLLBACK
2025-04-11 10:36:51,553 [INFO] Update id=734890235 is handled. Duration 270 ms by bot id=7443088052
2025-04-11 10:36:53,668 [INFO] BEGIN (implicit)
2025-04-11 10:36:53,670 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:36:53,670 [INFO] [generated in 0.00013s] (8,)
2025-04-11 10:36:53,672 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:36:53,672 [INFO] [generated in 0.00015s] (8,)
2025-04-11 10:36:53,674 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:36:53,674 [INFO] [generated in 0.00016s] (1,)
2025-04-11 10:36:54,024 [INFO] ROLLBACK
2025-04-11 10:36:54,024 [INFO] Update id=734890236 is handled. Duration 357 ms by bot id=7443088052
2025-04-11 10:36:55,901 [INFO] BEGIN (implicit)
2025-04-11 10:36:55,902 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:36:55,902 [INFO] [generated in 0.00013s] (6903748145,)
2025-04-11 10:36:55,903 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:36:55,904 [INFO] [generated in 0.00012s] (6903748145, 6)
2025-04-11 10:36:55,905 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:36:55,905 [INFO] [generated in 0.00011s] (6903748145, 6, 1)
2025-04-11 10:36:55,906 [INFO] COMMIT
2025-04-11 10:36:56,139 [INFO] Update id=734890237 is handled. Duration 238 ms by bot id=7443088052
2025-04-11 10:36:57,228 [INFO] BEGIN (implicit)
2025-04-11 10:36:57,230 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:36:57,230 [INFO] [generated in 0.00014s] (6903748145,)
2025-04-11 10:36:57,512 [INFO] ROLLBACK
2025-04-11 10:36:57,513 [INFO] Update id=734890238 is handled. Duration 285 ms by bot id=7443088052
2025-04-11 10:37:01,282 [INFO] BEGIN (implicit)
2025-04-11 10:37:01,282 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:37:01,282 [INFO] [cached since 5.381s ago] (6903748145,)
2025-04-11 10:37:01,417 [INFO] ROLLBACK
2025-04-11 10:37:01,418 [INFO] Update id=734890239 is handled. Duration 136 ms by bot id=7443088052
2025-04-11 10:37:03,971 [INFO] BEGIN (implicit)
2025-04-11 10:37:03,971 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:37:03,971 [INFO] [cached since 8.069s ago] (6903748145,)
2025-04-11 10:37:04,184 [INFO] ROLLBACK
2025-04-11 10:37:04,185 [INFO] Update id=734890240 is handled. Duration 214 ms by bot id=7443088052
2025-04-11 10:37:05,490 [INFO] Update id=734890241 is handled. Duration 190 ms by bot id=7443088052
2025-04-11 10:37:15,981 [INFO] BEGIN (implicit)
2025-04-11 10:37:15,982 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:37:15,982 [INFO] [cached since 20.08s ago] (6903748145,)
2025-04-11 10:37:15,983 [INFO] UPDATE users SET first_name=$1::VARCHAR, last_name=$2::VARCHAR, phone=$3::VARCHAR, address=$4::VARCHAR, updated=now() WHERE users.user_id = $5::BIGINT
2025-04-11 10:37:15,983 [INFO] [generated in 0.00015s] ('Ильмир', 'Гильмияров', '+201234567890', 'Новобирблово', 6903748145)
2025-04-11 10:37:15,984 [INFO] COMMIT
2025-04-11 10:37:16,107 [INFO] BEGIN (implicit)
2025-04-11 10:37:16,107 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:37:16,107 [INFO] [cached since 18.88s ago] (6903748145,)
2025-04-11 10:37:16,109 [INFO] INSERT INTO "order" (user_id, delivery_address, total_price, status, created, updated) VALUES ($1::BIGINT, $2::VARCHAR, $3::NUMERIC(5, 2), $4::VARCHAR, now(), now()) RETURNING "order".id, "order".created, "order".updated
2025-04-11 10:37:16,109 [INFO] [generated in 0.00013s] (6903748145, 'Новобирблово', Decimal('65.00'), 'оформлен')
2025-04-11 10:37:16,111 [INFO] UPDATE product SET quantity=$1::INTEGER, updated=now() WHERE product.id = $2::INTEGER
2025-04-11 10:37:16,111 [INFO] [generated in 0.00012s] (0, 6)
2025-04-11 10:37:16,112 [INFO] INSERT INTO order_item (order_id, product_id, quantity, created, updated) VALUES ($1::INTEGER, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING order_item.id, order_item.created, order_item.updated
2025-04-11 10:37:16,112 [INFO] [generated in 0.00015s] (12, 6, 1)
2025-04-11 10:37:16,114 [INFO] DELETE FROM cart WHERE cart.user_id = $1::BIGINT
2025-04-11 10:37:16,114 [INFO] [generated in 0.00011s] (6903748145,)
2025-04-11 10:37:16,114 [INFO] COMMIT
2025-04-11 10:37:16,142 [INFO] Update id=734890242 is not handled. Duration 161 ms by bot id=7443088052
2025-04-11 10:37:16,143 [ERROR] Cause exception while process update id=734890242 by bot id=7443088052
AttributeError: 'tuple' object has no attribute 'id'
Traceback (most recent call last):
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/middlewares/db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/handlers/user_private.py", line 236, in process_address
    f"📦 Новый заказ №{new_order.id}\n"
                       ^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'id'
2025-04-11 10:50:53,874 [INFO] Приложение запущено
2025-04-11 10:50:53,880 [DEBUG] Using selector: EpollSelector
2025-04-11 10:50:54,446 [INFO] select pg_catalog.version()
2025-04-11 10:50:54,446 [INFO] [raw sql] ()
2025-04-11 10:50:54,448 [INFO] select current_schema()
2025-04-11 10:50:54,448 [INFO] [raw sql] ()
2025-04-11 10:50:54,448 [INFO] show standard_conforming_strings
2025-04-11 10:50:54,448 [INFO] [raw sql] ()
2025-04-11 10:50:54,449 [INFO] BEGIN (implicit)
2025-04-11 10:50:54,451 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,451 [INFO] [generated in 0.00019s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,453 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,453 [INFO] [cached since 0.001759s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,453 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,453 [INFO] [cached since 0.002189s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,454 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,454 [INFO] [cached since 0.002557s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,454 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,454 [INFO] [cached since 0.002899s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,454 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,454 [INFO] [cached since 0.003221s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,455 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,455 [INFO] [cached since 0.003542s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,455 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:50:54,455 [INFO] [cached since 0.003792s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:50:54,455 [INFO] COMMIT
2025-04-11 10:50:54,456 [INFO] BEGIN (implicit)
2025-04-11 10:50:54,473 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:50:54,473 [INFO] [generated in 0.00017s] ()
2025-04-11 10:50:54,475 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:50:54,475 [INFO] [generated in 0.00012s] ()
2025-04-11 10:50:54,476 [INFO] ROLLBACK
2025-04-11 10:50:54,476 [INFO] Start polling
2025-04-11 10:50:54,635 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:51:07,579 [INFO] BEGIN (implicit)
2025-04-11 10:51:07,580 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:51:07,580 [INFO] [generated in 0.00014s] ('main',)
2025-04-11 10:51:07,948 [INFO] ROLLBACK
2025-04-11 10:51:07,949 [INFO] Update id=734890243 is handled. Duration 370 ms by bot id=7443088052
2025-04-11 10:51:09,551 [INFO] BEGIN (implicit)
2025-04-11 10:51:09,551 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:51:09,551 [INFO] [cached since 1.972s ago] ('catalog',)
2025-04-11 10:51:09,552 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:51:09,552 [INFO] [cached since 15.08s ago] ()
2025-04-11 10:51:09,925 [INFO] ROLLBACK
2025-04-11 10:51:09,925 [INFO] Update id=734890244 is handled. Duration 374 ms by bot id=7443088052
2025-04-11 10:51:11,925 [INFO] BEGIN (implicit)
2025-04-11 10:51:11,927 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:51:11,928 [INFO] [generated in 0.00013s] (8,)
2025-04-11 10:51:11,930 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:51:11,930 [INFO] [generated in 0.00016s] (1,)
2025-04-11 10:51:11,932 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:51:11,932 [INFO] [generated in 0.00019s] (8,)
2025-04-11 10:51:12,277 [INFO] ROLLBACK
2025-04-11 10:51:12,277 [INFO] Update id=734890245 is handled. Duration 352 ms by bot id=7443088052
2025-04-11 10:51:14,410 [INFO] BEGIN (implicit)
2025-04-11 10:51:14,411 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:51:14,411 [INFO] [generated in 0.00013s] (6903748145,)
2025-04-11 10:51:14,412 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:51:14,413 [INFO] [generated in 0.00011s] (6903748145, 4)
2025-04-11 10:51:14,414 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:51:14,414 [INFO] [generated in 0.00010s] (6903748145, 4, 1)
2025-04-11 10:51:14,415 [INFO] COMMIT
2025-04-11 10:51:14,565 [INFO] Update id=734890246 is handled. Duration 155 ms by bot id=7443088052
2025-04-11 10:51:15,281 [INFO] BEGIN (implicit)
2025-04-11 10:51:15,281 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:51:15,281 [INFO] [cached since 3.354s ago] (8,)
2025-04-11 10:51:15,282 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:51:15,282 [INFO] [cached since 3.353s ago] (1,)
2025-04-11 10:51:15,283 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:51:15,283 [INFO] [cached since 3.351s ago] (8,)
2025-04-11 10:51:15,563 [INFO] ROLLBACK
2025-04-11 10:51:15,563 [INFO] Update id=734890247 is handled. Duration 282 ms by bot id=7443088052
2025-04-11 10:51:17,667 [INFO] BEGIN (implicit)
2025-04-11 10:51:17,667 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:51:17,667 [INFO] [cached since 10.09s ago] ('catalog',)
2025-04-11 10:51:17,668 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:51:17,668 [INFO] [cached since 23.19s ago] ()
2025-04-11 10:51:18,093 [INFO] ROLLBACK
2025-04-11 10:51:18,093 [INFO] Update id=734890248 is handled. Duration 427 ms by bot id=7443088052
2025-04-11 10:51:20,964 [INFO] BEGIN (implicit)
2025-04-11 10:51:20,965 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:51:20,965 [INFO] [cached since 9.037s ago] (6,)
2025-04-11 10:51:20,966 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:51:20,966 [INFO] [cached since 9.036s ago] (1,)
2025-04-11 10:51:20,966 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:51:20,967 [INFO] [cached since 9.035s ago] (6,)
2025-04-11 10:51:21,279 [INFO] ROLLBACK
2025-04-11 10:51:21,280 [INFO] Update id=734890249 is handled. Duration 315 ms by bot id=7443088052
2025-04-11 10:51:22,902 [INFO] BEGIN (implicit)
2025-04-11 10:51:22,902 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner 
WHERE banner.name = $1::VARCHAR
2025-04-11 10:51:22,902 [INFO] [cached since 15.32s ago] ('catalog',)
2025-04-11 10:51:22,903 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:51:22,903 [INFO] [cached since 28.43s ago] ()
2025-04-11 10:51:23,428 [INFO] ROLLBACK
2025-04-11 10:51:23,429 [INFO] Update id=734890250 is handled. Duration 526 ms by bot id=7443088052
2025-04-11 10:51:24,832 [INFO] BEGIN (implicit)
2025-04-11 10:51:24,833 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.category_id = $1::INTEGER
2025-04-11 10:51:24,833 [INFO] [cached since 12.91s ago] (5,)
2025-04-11 10:51:24,834 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 10:51:24,834 [INFO] [cached since 12.9s ago] (1,)
2025-04-11 10:51:24,835 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 10:51:24,835 [INFO] [cached since 12.9s ago] (5,)
2025-04-11 10:51:25,364 [INFO] ROLLBACK
2025-04-11 10:51:25,365 [INFO] Update id=734890251 is handled. Duration 533 ms by bot id=7443088052
2025-04-11 10:51:27,029 [INFO] BEGIN (implicit)
2025-04-11 10:51:27,029 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:51:27,029 [INFO] [cached since 12.62s ago] (6903748145,)
2025-04-11 10:51:27,030 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated 
FROM cart 
WHERE cart.user_id = $1::BIGINT AND cart.product_id = $2::INTEGER
2025-04-11 10:51:27,030 [INFO] [cached since 12.62s ago] (6903748145, 1)
2025-04-11 10:51:27,031 [INFO] INSERT INTO cart (user_id, product_id, quantity, created, updated) VALUES ($1::BIGINT, $2::INTEGER, $3::INTEGER, now(), now()) RETURNING cart.id, cart.created, cart.updated
2025-04-11 10:51:27,031 [INFO] [cached since 12.62s ago] (6903748145, 1, 1)
2025-04-11 10:51:27,031 [INFO] COMMIT
2025-04-11 10:51:27,195 [INFO] Update id=734890252 is handled. Duration 166 ms by bot id=7443088052
2025-04-11 10:51:31,824 [INFO] BEGIN (implicit)
2025-04-11 10:51:31,826 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:51:31,826 [INFO] [generated in 0.00013s] (6903748145,)
2025-04-11 10:51:32,309 [INFO] ROLLBACK
2025-04-11 10:51:32,310 [INFO] Update id=734890253 is handled. Duration 486 ms by bot id=7443088052
2025-04-11 10:51:36,262 [INFO] BEGIN (implicit)
2025-04-11 10:51:36,262 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:51:36,262 [INFO] [cached since 21.85s ago] (6903748145,)
2025-04-11 10:51:36,500 [INFO] ROLLBACK
2025-04-11 10:51:36,501 [INFO] Update id=734890254 is handled. Duration 239 ms by bot id=7443088052
2025-04-11 10:51:37,870 [INFO] BEGIN (implicit)
2025-04-11 10:51:37,870 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:51:37,870 [INFO] [cached since 23.46s ago] (6903748145,)
2025-04-11 10:51:38,076 [INFO] ROLLBACK
2025-04-11 10:51:38,077 [INFO] Update id=734890255 is handled. Duration 207 ms by bot id=7443088052
2025-04-11 10:51:41,277 [INFO] BEGIN (implicit)
2025-04-11 10:51:41,278 [INFO] SELECT users.id, users.user_id, users.first_name, users.last_name, users.phone, users.address, users.created, users.updated 
FROM users 
WHERE users.user_id = $1::BIGINT
2025-04-11 10:51:41,278 [INFO] [cached since 26.87s ago] (6903748145,)
2025-04-11 10:51:41,279 [INFO] SELECT cart.id, cart.user_id, cart.product_id, cart.quantity, cart.created, cart.updated, product_1.id AS id_1, product_1.name, product_1.description, product_1.purchase_price, product_1.price, product_1.image, product_1.category_id, product_1.seller_id, product_1.quantity AS quantity_1, product_1.created AS created_1, product_1.updated AS updated_1 
FROM cart LEFT OUTER JOIN product AS product_1 ON product_1.id = cart.product_id 
WHERE cart.user_id = $1::BIGINT
2025-04-11 10:51:41,279 [INFO] [cached since 9.453s ago] (6903748145,)
2025-04-11 10:51:41,280 [INFO] INSERT INTO "order" (user_id, delivery_address, total_price, status, created, updated) VALUES ($1::BIGINT, $2::VARCHAR, $3::NUMERIC(5, 2), $4::VARCHAR, now(), now()) RETURNING "order".id, "order".created, "order".updated
2025-04-11 10:51:41,280 [INFO] [generated in 0.00011s] (6903748145, 'Новобирблово', Decimal('504.00'), 'оформлен')
2025-04-11 10:51:41,282 [INFO] UPDATE product SET quantity=$1::INTEGER, updated=now() WHERE product.id = $2::INTEGER
2025-04-11 10:51:41,282 [INFO] [generated in 0.00012s] [(0, 1), (0, 4)]
2025-04-11 10:51:41,284 [INFO] INSERT INTO order_item (order_id, product_id, quantity, created, updated) SELECT p0::INTEGER, p1::INTEGER, p2::INTEGER, p3::TIMESTAMP WITHOUT TIME ZONE, p4::TIMESTAMP WITHOUT TIME ZONE FROM (VALUES ($1::INTEGER, $2::INTEGER, $3::INTEGER, now(), now(), 0), ($4::INTEGER, $5::INTEGER, $6::INTEGER, now(), now(), 1)) AS imp_sen(p0, p1, p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING order_item.id, order_item.created, order_item.updated, order_item.id AS id__1
2025-04-11 10:51:41,284 [INFO] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] (13, 4, 1, 13, 1, 1)
2025-04-11 10:51:41,286 [INFO] DELETE FROM cart WHERE cart.user_id = $1::BIGINT
2025-04-11 10:51:41,286 [INFO] [generated in 0.00019s] (6903748145,)
2025-04-11 10:51:41,287 [INFO] COMMIT
2025-04-11 10:51:41,834 [INFO] Update id=734890256 is not handled. Duration 557 ms by bot id=7443088052
2025-04-11 10:51:41,834 [ERROR] Cause exception while process update id=734890256 by bot id=7443088052
TypeError: main_menu() got multiple values for argument 'level'
Traceback (most recent call last):
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/middlewares/db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/handlers/user_private.py", line 200, in confirm_address
    await main_menu(callback, session, level=0)
          ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: main_menu() got multiple values for argument 'level'
2025-04-11 10:52:14,261 [INFO] Update id=734890257 is not handled. Duration 1 ms by bot id=7443088052
2025-04-11 10:57:56,899 [INFO] Приложение запущено
2025-04-11 10:57:56,905 [DEBUG] Using selector: EpollSelector
2025-04-11 10:57:57,249 [INFO] select pg_catalog.version()
2025-04-11 10:57:57,249 [INFO] [raw sql] ()
2025-04-11 10:57:57,250 [INFO] select current_schema()
2025-04-11 10:57:57,250 [INFO] [raw sql] ()
2025-04-11 10:57:57,250 [INFO] show standard_conforming_strings
2025-04-11 10:57:57,250 [INFO] [raw sql] ()
2025-04-11 10:57:57,251 [INFO] BEGIN (implicit)
2025-04-11 10:57:57,253 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,253 [INFO] [generated in 0.00015s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,254 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,254 [INFO] [cached since 0.001668s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,255 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,255 [INFO] [cached since 0.002142s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,255 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,255 [INFO] [cached since 0.002547s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,256 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,256 [INFO] [cached since 0.002941s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,256 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,256 [INFO] [cached since 0.003336s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,256 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,256 [INFO] [cached since 0.003721s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,257 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:57:57,257 [INFO] [cached since 0.004027s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:57:57,257 [INFO] COMMIT
2025-04-11 10:57:57,258 [INFO] BEGIN (implicit)
2025-04-11 10:57:57,273 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:57:57,273 [INFO] [generated in 0.00016s] ()
2025-04-11 10:57:57,274 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:57:57,275 [INFO] [generated in 0.00012s] ()
2025-04-11 10:57:57,275 [INFO] ROLLBACK
2025-04-11 10:57:57,276 [INFO] Start polling
2025-04-11 10:57:57,359 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:58:17,197 [INFO] Update id=734890258 is handled. Duration 348 ms by bot id=7443088052
2025-04-11 10:58:20,102 [INFO] Update id=734890259 is handled. Duration 181 ms by bot id=7443088052
2025-04-11 10:59:44,699 [INFO] Приложение запущено
2025-04-11 10:59:44,705 [DEBUG] Using selector: EpollSelector
2025-04-11 10:59:45,238 [INFO] select pg_catalog.version()
2025-04-11 10:59:45,238 [INFO] [raw sql] ()
2025-04-11 10:59:45,239 [INFO] select current_schema()
2025-04-11 10:59:45,239 [INFO] [raw sql] ()
2025-04-11 10:59:45,239 [INFO] show standard_conforming_strings
2025-04-11 10:59:45,240 [INFO] [raw sql] ()
2025-04-11 10:59:45,240 [INFO] BEGIN (implicit)
2025-04-11 10:59:45,242 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,242 [INFO] [generated in 0.00015s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,244 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,244 [INFO] [cached since 0.001516s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,244 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,244 [INFO] [cached since 0.001962s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,244 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,244 [INFO] [cached since 0.002368s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,245 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,245 [INFO] [cached since 0.002717s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,245 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,245 [INFO] [cached since 0.003051s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,245 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,245 [INFO] [cached since 0.003381s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,246 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 10:59:45,246 [INFO] [cached since 0.003651s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 10:59:45,246 [INFO] COMMIT
2025-04-11 10:59:45,247 [INFO] BEGIN (implicit)
2025-04-11 10:59:45,262 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:59:45,262 [INFO] [generated in 0.00016s] ()
2025-04-11 10:59:45,264 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 10:59:45,264 [INFO] [generated in 0.00015s] ()
2025-04-11 10:59:45,265 [INFO] ROLLBACK
2025-04-11 10:59:45,265 [INFO] Start polling
2025-04-11 10:59:45,398 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 10:59:58,413 [INFO] Update id=734890260 is handled. Duration 390 ms by bot id=7443088052
2025-04-11 10:59:59,527 [INFO] BEGIN (implicit)
2025-04-11 10:59:59,527 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 10:59:59,527 [INFO] [cached since 14.26s ago] ()
2025-04-11 10:59:59,737 [INFO] ROLLBACK
2025-04-11 10:59:59,738 [INFO] Update id=734890261 is handled. Duration 211 ms by bot id=7443088052
2025-04-11 11:00:03,896 [INFO] BEGIN (implicit)
2025-04-11 11:00:03,898 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product
2025-04-11 11:00:03,898 [INFO] [generated in 0.00012s] ()
2025-04-11 11:00:03,900 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 11:00:03,900 [INFO] [generated in 0.00016s] (1,)
2025-04-11 11:00:03,902 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER, $2::INTEGER, $3::INTEGER, $4::INTEGER)
2025-04-11 11:00:03,902 [INFO] [generated in 0.00020s] (5, 6, 7, 8)
2025-04-11 11:00:05,006 [INFO] ROLLBACK
2025-04-11 11:00:05,007 [INFO] Update id=734890262 is handled. Duration 1111 ms by bot id=7443088052
2025-04-11 11:00:11,756 [INFO] BEGIN (implicit)
2025-04-11 11:00:11,757 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:00:11,757 [INFO] [generated in 0.00013s] (4,)
2025-04-11 11:00:11,758 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:00:11,758 [INFO] [generated in 0.00014s] (8,)
2025-04-11 11:00:12,044 [INFO] ROLLBACK
2025-04-11 11:00:12,045 [INFO] Update id=734890263 is handled. Duration 289 ms by bot id=7443088052
2025-04-11 11:00:15,192 [INFO] Update id=734890264 is handled. Duration 152 ms by bot id=7443088052
2025-04-11 11:00:17,432 [INFO] BEGIN (implicit)
2025-04-11 11:00:17,432 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:00:17,432 [INFO] [cached since 32.17s ago] ()
2025-04-11 11:00:17,624 [INFO] ROLLBACK
2025-04-11 11:00:17,625 [INFO] Update id=734890265 is handled. Duration 194 ms by bot id=7443088052
2025-04-11 11:00:20,262 [INFO] BEGIN (implicit)
2025-04-11 11:00:20,262 [INFO] SELECT sellers.id, sellers.name, sellers.description, sellers.phone, sellers.address, sellers.created, sellers.updated 
FROM sellers
2025-04-11 11:00:20,262 [INFO] [generated in 0.00012s] ()
2025-04-11 11:00:20,460 [INFO] ROLLBACK
2025-04-11 11:00:20,461 [INFO] Update id=734890266 is handled. Duration 200 ms by bot id=7443088052
2025-04-11 11:00:22,223 [INFO] Update id=734890267 is not handled. Duration 1 ms by bot id=7443088052
2025-04-11 11:00:22,224 [ERROR] Cause exception while process update id=734890267 by bot id=7443088052
DetachedInstanceError: Parent instance <Product at 0x792206dc7530> is not bound to a Session; lazy load operation of attribute 'seller' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
Traceback (most recent call last):
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/middlewares/db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/handlers/admin_private.py", line 370, in skip_seller
    await state.update_data(seller=AddProduct.product_for_change.seller)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 922, in _load_for_state
    raise orm_exc.DetachedInstanceError(
    ...<3 lines>...
    )
sqlalchemy.orm.exc.DetachedInstanceError: Parent instance <Product at 0x792206dc7530> is not bound to a Session; lazy load operation of attribute 'seller' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-04-11 11:04:58,067 [INFO] Приложение запущено
2025-04-11 11:04:58,073 [DEBUG] Using selector: EpollSelector
2025-04-11 11:04:58,505 [INFO] select pg_catalog.version()
2025-04-11 11:04:58,505 [INFO] [raw sql] ()
2025-04-11 11:04:58,506 [INFO] select current_schema()
2025-04-11 11:04:58,506 [INFO] [raw sql] ()
2025-04-11 11:04:58,506 [INFO] show standard_conforming_strings
2025-04-11 11:04:58,506 [INFO] [raw sql] ()
2025-04-11 11:04:58,507 [INFO] BEGIN (implicit)
2025-04-11 11:04:58,509 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,509 [INFO] [generated in 0.00015s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,511 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,511 [INFO] [cached since 0.001662s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,511 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,511 [INFO] [cached since 0.002175s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,512 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,512 [INFO] [cached since 0.002598s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,512 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,512 [INFO] [cached since 0.003019s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,512 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,512 [INFO] [cached since 0.003475s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,513 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,513 [INFO] [cached since 0.003936s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,513 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:04:58,513 [INFO] [cached since 0.004294s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:04:58,514 [INFO] COMMIT
2025-04-11 11:04:58,514 [INFO] BEGIN (implicit)
2025-04-11 11:04:58,530 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:04:58,530 [INFO] [generated in 0.00025s] ()
2025-04-11 11:04:58,532 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:04:58,532 [INFO] [generated in 0.00014s] ()
2025-04-11 11:04:58,533 [INFO] ROLLBACK
2025-04-11 11:04:58,534 [INFO] Start polling
2025-04-11 11:04:58,644 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:05:20,883 [INFO] Update id=734890268 is not handled. Duration 1 ms by bot id=7443088052
2025-04-11 11:05:27,053 [INFO] Приложение запущено
2025-04-11 11:05:27,060 [DEBUG] Using selector: EpollSelector
2025-04-11 11:05:27,409 [INFO] select pg_catalog.version()
2025-04-11 11:05:27,409 [INFO] [raw sql] ()
2025-04-11 11:05:27,410 [INFO] select current_schema()
2025-04-11 11:05:27,410 [INFO] [raw sql] ()
2025-04-11 11:05:27,410 [INFO] show standard_conforming_strings
2025-04-11 11:05:27,410 [INFO] [raw sql] ()
2025-04-11 11:05:27,411 [INFO] BEGIN (implicit)
2025-04-11 11:05:27,413 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,413 [INFO] [generated in 0.00017s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,414 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,415 [INFO] [cached since 0.001689s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,415 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,415 [INFO] [cached since 0.002171s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,415 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,415 [INFO] [cached since 0.002531s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,416 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,416 [INFO] [cached since 0.002862s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,416 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,416 [INFO] [cached since 0.003178s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,416 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,416 [INFO] [cached since 0.003494s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,417 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:05:27,417 [INFO] [cached since 0.003742s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:05:27,417 [INFO] COMMIT
2025-04-11 11:05:27,418 [INFO] BEGIN (implicit)
2025-04-11 11:05:27,435 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:05:27,435 [INFO] [generated in 0.00023s] ()
2025-04-11 11:05:27,438 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:05:27,438 [INFO] [generated in 0.00034s] ()
2025-04-11 11:05:27,439 [INFO] ROLLBACK
2025-04-11 11:05:27,440 [INFO] Start polling
2025-04-11 11:05:27,541 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:05:29,789 [INFO] BEGIN (implicit)
2025-04-11 11:05:29,791 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:05:29,791 [INFO] [generated in 0.00018s] (4,)
2025-04-11 11:05:29,793 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:05:29,793 [INFO] [generated in 0.00015s] (8,)
2025-04-11 11:05:30,334 [INFO] ROLLBACK
2025-04-11 11:05:30,335 [INFO] Update id=734890269 is handled. Duration 547 ms by bot id=7443088052
2025-04-11 11:05:34,015 [INFO] Update id=734890270 is handled. Duration 195 ms by bot id=7443088052
2025-04-11 11:05:35,570 [INFO] BEGIN (implicit)
2025-04-11 11:05:35,570 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:05:35,571 [INFO] [cached since 8.136s ago] ()
2025-04-11 11:05:35,823 [INFO] ROLLBACK
2025-04-11 11:05:35,823 [INFO] Update id=734890271 is handled. Duration 254 ms by bot id=7443088052
2025-04-11 11:05:38,041 [INFO] Update id=734890272 is handled. Duration 327 ms by bot id=7443088052
2025-04-11 11:10:37,696 [INFO] Приложение запущено
2025-04-11 11:10:37,702 [DEBUG] Using selector: EpollSelector
2025-04-11 11:10:38,146 [INFO] select pg_catalog.version()
2025-04-11 11:10:38,146 [INFO] [raw sql] ()
2025-04-11 11:10:38,147 [INFO] select current_schema()
2025-04-11 11:10:38,147 [INFO] [raw sql] ()
2025-04-11 11:10:38,147 [INFO] show standard_conforming_strings
2025-04-11 11:10:38,147 [INFO] [raw sql] ()
2025-04-11 11:10:38,148 [INFO] BEGIN (implicit)
2025-04-11 11:10:38,151 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,151 [INFO] [generated in 0.00021s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,153 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,153 [INFO] [cached since 0.00245s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,154 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,154 [INFO] [cached since 0.003398s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,154 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,154 [INFO] [cached since 0.003922s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,155 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,155 [INFO] [cached since 0.004343s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,155 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,155 [INFO] [cached since 0.004787s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,156 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,156 [INFO] [cached since 0.005233s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,156 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:10:38,156 [INFO] [cached since 0.005582s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:10:38,156 [INFO] COMMIT
2025-04-11 11:10:38,157 [INFO] BEGIN (implicit)
2025-04-11 11:10:38,173 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:10:38,173 [INFO] [generated in 0.00030s] ()
2025-04-11 11:10:38,175 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:10:38,176 [INFO] [generated in 0.00015s] ()
2025-04-11 11:10:38,176 [INFO] ROLLBACK
2025-04-11 11:10:38,177 [INFO] Start polling
2025-04-11 11:10:38,284 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:10:40,910 [INFO] BEGIN (implicit)
2025-04-11 11:10:40,911 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:10:40,912 [INFO] [generated in 0.00014s] (4,)
2025-04-11 11:10:40,914 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:10:40,914 [INFO] [generated in 0.00016s] (8,)
2025-04-11 11:10:41,393 [INFO] ROLLBACK
2025-04-11 11:10:41,393 [INFO] Update id=734890273 is handled. Duration 484 ms by bot id=7443088052
2025-04-11 11:10:46,385 [INFO] Update id=734890274 is handled. Duration 151 ms by bot id=7443088052
2025-04-11 11:10:48,526 [INFO] BEGIN (implicit)
2025-04-11 11:10:48,526 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:10:48,526 [INFO] [cached since 10.35s ago] ()
2025-04-11 11:10:48,681 [INFO] ROLLBACK
2025-04-11 11:10:48,682 [INFO] Update id=734890275 is handled. Duration 157 ms by bot id=7443088052
2025-04-11 11:10:49,982 [INFO] BEGIN (implicit)
2025-04-11 11:10:49,983 [INFO] SELECT sellers.id, sellers.name, sellers.description, sellers.phone, sellers.address, sellers.created, sellers.updated 
FROM sellers
2025-04-11 11:10:49,983 [INFO] [generated in 0.00011s] ()
2025-04-11 11:10:50,122 [INFO] ROLLBACK
2025-04-11 11:10:50,122 [INFO] Update id=734890276 is handled. Duration 141 ms by bot id=7443088052
2025-04-11 11:10:51,238 [INFO] Update id=734890277 is not handled. Duration 1 ms by bot id=7443088052
2025-04-11 11:10:51,238 [ERROR] Cause exception while process update id=734890277 by bot id=7443088052
DetachedInstanceError: Parent instance <Product at 0x7fad28789fd0> is not bound to a Session; lazy load operation of attribute 'seller' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
Traceback (most recent call last):
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/fsm/middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/middlewares/db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        observer=observer, update_type=update_type, event=telegram_event, **data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/handlers/admin_private.py", line 370, in skip_seller
    await state.update_data(seller=AddProduct.product_for_change.seller)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/home/ilmir/dev_code/sultanshop_tg_bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/strategies.py", line 922, in _load_for_state
    raise orm_exc.DetachedInstanceError(
    ...<3 lines>...
    )
sqlalchemy.orm.exc.DetachedInstanceError: Parent instance <Product at 0x7fad28789fd0> is not bound to a Session; lazy load operation of attribute 'seller' cannot proceed (Background on this error at: https://sqlalche.me/e/20/bhk3)
2025-04-11 11:16:50,180 [INFO] Приложение запущено
2025-04-11 11:16:50,186 [DEBUG] Using selector: EpollSelector
2025-04-11 11:16:50,602 [INFO] select pg_catalog.version()
2025-04-11 11:16:50,602 [INFO] [raw sql] ()
2025-04-11 11:16:50,603 [INFO] select current_schema()
2025-04-11 11:16:50,603 [INFO] [raw sql] ()
2025-04-11 11:16:50,603 [INFO] show standard_conforming_strings
2025-04-11 11:16:50,603 [INFO] [raw sql] ()
2025-04-11 11:16:50,604 [INFO] BEGIN (implicit)
2025-04-11 11:16:50,606 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,606 [INFO] [generated in 0.00016s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,607 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,608 [INFO] [cached since 0.001825s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,608 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,608 [INFO] [cached since 0.002291s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,608 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,608 [INFO] [cached since 0.002695s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,609 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,609 [INFO] [cached since 0.003083s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,609 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,609 [INFO] [cached since 0.003448s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,609 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,610 [INFO] [cached since 0.003797s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,610 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:16:50,610 [INFO] [cached since 0.004065s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:16:50,610 [INFO] COMMIT
2025-04-11 11:16:50,611 [INFO] BEGIN (implicit)
2025-04-11 11:16:50,626 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:16:50,626 [INFO] [generated in 0.00016s] ()
2025-04-11 11:16:50,628 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:16:50,628 [INFO] [generated in 0.00011s] ()
2025-04-11 11:16:50,629 [INFO] ROLLBACK
2025-04-11 11:16:50,629 [INFO] Start polling
2025-04-11 11:16:50,722 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:17:05,341 [INFO] BEGIN (implicit)
2025-04-11 11:17:05,343 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:17:05,343 [INFO] [generated in 0.00014s] (4,)
2025-04-11 11:17:05,345 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:17:05,345 [INFO] [generated in 0.00015s] (8,)
2025-04-11 11:17:05,347 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 11:17:05,347 [INFO] [generated in 0.00024s] (1,)
2025-04-11 11:17:05,859 [INFO] ROLLBACK
2025-04-11 11:17:05,859 [INFO] Update id=734890278 is handled. Duration 519 ms by bot id=7443088052
2025-04-11 11:17:10,101 [INFO] Update id=734890279 is handled. Duration 158 ms by bot id=7443088052
2025-04-11 11:17:11,688 [INFO] BEGIN (implicit)
2025-04-11 11:17:11,689 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:17:11,689 [INFO] [cached since 21.06s ago] ()
2025-04-11 11:17:11,924 [INFO] ROLLBACK
2025-04-11 11:17:11,925 [INFO] Update id=734890280 is handled. Duration 237 ms by bot id=7443088052
2025-04-11 11:17:15,625 [INFO] BEGIN (implicit)
2025-04-11 11:17:15,625 [INFO] SELECT sellers.id, sellers.name, sellers.description, sellers.phone, sellers.address, sellers.created, sellers.updated 
FROM sellers
2025-04-11 11:17:15,625 [INFO] [generated in 0.00012s] ()
2025-04-11 11:17:15,752 [INFO] ROLLBACK
2025-04-11 11:17:15,753 [INFO] Update id=734890281 is handled. Duration 128 ms by bot id=7443088052
2025-04-11 11:17:17,123 [INFO] Update id=734890282 is handled. Duration 0 ms by bot id=7443088052
2025-04-11 11:21:13,589 [INFO] Приложение запущено
2025-04-11 11:21:13,595 [DEBUG] Using selector: EpollSelector
2025-04-11 11:21:13,988 [INFO] select pg_catalog.version()
2025-04-11 11:21:13,988 [INFO] [raw sql] ()
2025-04-11 11:21:13,989 [INFO] select current_schema()
2025-04-11 11:21:13,989 [INFO] [raw sql] ()
2025-04-11 11:21:13,990 [INFO] show standard_conforming_strings
2025-04-11 11:21:13,990 [INFO] [raw sql] ()
2025-04-11 11:21:13,990 [INFO] BEGIN (implicit)
2025-04-11 11:21:13,992 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,993 [INFO] [generated in 0.00016s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,994 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,994 [INFO] [cached since 0.001555s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,994 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,994 [INFO] [cached since 0.002024s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,995 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,995 [INFO] [cached since 0.002418s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,995 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,995 [INFO] [cached since 0.002839s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,996 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,996 [INFO] [cached since 0.003195s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,996 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,996 [INFO] [cached since 0.003543s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,996 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:21:13,996 [INFO] [cached since 0.004062s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:21:13,997 [INFO] COMMIT
2025-04-11 11:21:13,998 [INFO] BEGIN (implicit)
2025-04-11 11:21:14,014 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:21:14,014 [INFO] [generated in 0.00025s] ()
2025-04-11 11:21:14,016 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:21:14,016 [INFO] [generated in 0.00016s] ()
2025-04-11 11:21:14,017 [INFO] ROLLBACK
2025-04-11 11:21:14,018 [INFO] Start polling
2025-04-11 11:21:14,129 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:21:30,544 [INFO] BEGIN (implicit)
2025-04-11 11:21:30,546 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:21:30,546 [INFO] [generated in 0.00013s] (4,)
2025-04-11 11:21:30,548 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:21:30,548 [INFO] [generated in 0.00017s] (8,)
2025-04-11 11:21:30,550 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 11:21:30,550 [INFO] [generated in 0.00023s] (1,)
2025-04-11 11:21:31,144 [INFO] ROLLBACK
2025-04-11 11:21:31,145 [INFO] Update id=734890283 is handled. Duration 602 ms by bot id=7443088052
2025-04-11 11:21:37,073 [INFO] Update id=734890284 is handled. Duration 130 ms by bot id=7443088052
2025-04-11 11:21:37,963 [INFO] BEGIN (implicit)
2025-04-11 11:21:37,963 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:21:37,963 [INFO] [cached since 23.95s ago] ()
2025-04-11 11:21:38,164 [INFO] ROLLBACK
2025-04-11 11:21:38,164 [INFO] Update id=734890285 is handled. Duration 202 ms by bot id=7443088052
2025-04-11 11:21:40,478 [INFO] BEGIN (implicit)
2025-04-11 11:21:40,478 [INFO] SELECT sellers.id, sellers.name, sellers.description, sellers.phone, sellers.address, sellers.created, sellers.updated 
FROM sellers
2025-04-11 11:21:40,478 [INFO] [generated in 0.00011s] ()
2025-04-11 11:21:40,613 [INFO] ROLLBACK
2025-04-11 11:21:40,613 [INFO] Update id=734890286 is handled. Duration 136 ms by bot id=7443088052
2025-04-11 11:21:41,886 [INFO] Update id=734890287 is handled. Duration 138 ms by bot id=7443088052
2025-04-11 11:21:46,937 [INFO] Update id=734890288 is handled. Duration 125 ms by bot id=7443088052
2025-04-11 11:21:51,717 [INFO] Update id=734890289 is handled. Duration 140 ms by bot id=7443088052
2025-04-11 11:21:53,585 [INFO] Данные для обновления/добавления товара: {'name': 'ноут', 'description': 'ноут мой', 'category': 8, 'seller': <database.models.Seller object at 0x71fe094823c0>, 'quantity': 25, 'price': Decimal('450.00'), 'purchase_price': Decimal('1.00'), 'image': 'AgACAgIAAxkBAAIC3mf2XyuEFgbpn_1EwHDbea4X8ogGAAJK7DEbJbK5Sw5JC768PWcVAQADAgADeQADNgQ'}
2025-04-11 11:21:53,585 [INFO] Обновляем товар с ID 4 данными: {'name': 'ноут', 'description': 'ноут мой', 'category': 8, 'seller': <database.models.Seller object at 0x71fe094823c0>, 'quantity': 25, 'price': Decimal('450.00'), 'purchase_price': Decimal('1.00'), 'image': 'AgACAgIAAxkBAAIC3mf2XyuEFgbpn_1EwHDbea4X8ogGAAJK7DEbJbK5Sw5JC768PWcVAQADAgADeQADNgQ'}
2025-04-11 11:21:53,586 [ERROR] Ошибка при обновлении/добавлении товара: int() argument must be a string, a bytes-like object or a real number, not 'Seller'
2025-04-11 11:21:53,776 [INFO] Update id=734890290 is handled. Duration 192 ms by bot id=7443088052
2025-04-11 11:23:45,684 [INFO] Приложение запущено
2025-04-11 11:23:45,690 [DEBUG] Using selector: EpollSelector
2025-04-11 11:23:46,064 [INFO] select pg_catalog.version()
2025-04-11 11:23:46,064 [INFO] [raw sql] ()
2025-04-11 11:23:46,065 [INFO] select current_schema()
2025-04-11 11:23:46,065 [INFO] [raw sql] ()
2025-04-11 11:23:46,065 [INFO] show standard_conforming_strings
2025-04-11 11:23:46,065 [INFO] [raw sql] ()
2025-04-11 11:23:46,066 [INFO] BEGIN (implicit)
2025-04-11 11:23:46,068 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,068 [INFO] [generated in 0.00015s] ('banner', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,070 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,070 [INFO] [cached since 0.001518s ago] ('category', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,070 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,070 [INFO] [cached since 0.002043s ago] ('product', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,071 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,071 [INFO] [cached since 0.002486s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,071 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,071 [INFO] [cached since 0.002887s ago] ('sellers', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,071 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,071 [INFO] [cached since 0.003252s ago] ('cart', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,072 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,072 [INFO] [cached since 0.003602s ago] ('order', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,072 [INFO] SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-04-11 11:23:46,072 [INFO] [cached since 0.003894s ago] ('order_item', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-04-11 11:23:46,072 [INFO] COMMIT
2025-04-11 11:23:46,073 [INFO] BEGIN (implicit)
2025-04-11 11:23:46,087 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:23:46,087 [INFO] [generated in 0.00017s] ()
2025-04-11 11:23:46,089 [INFO] SELECT banner.id, banner.name, banner.image, banner.description, banner.created, banner.updated 
FROM banner
2025-04-11 11:23:46,089 [INFO] [generated in 0.00012s] ()
2025-04-11 11:23:46,089 [INFO] ROLLBACK
2025-04-11 11:23:46,090 [INFO] Start polling
2025-04-11 11:23:46,192 [INFO] Run polling for bot @sultanshop20_bot id=7443088052 - 'Sultan shop'
2025-04-11 11:24:00,877 [INFO] BEGIN (implicit)
2025-04-11 11:24:00,879 [INFO] SELECT product.id, product.name, product.description, product.purchase_price, product.price, product.image, product.category_id, product.seller_id, product.quantity, product.created, product.updated 
FROM product 
WHERE product.id = $1::INTEGER
2025-04-11 11:24:00,879 [INFO] [generated in 0.00013s] (4,)
2025-04-11 11:24:00,881 [INFO] SELECT category.id AS category_id, category.name AS category_name, category.created AS category_created, category.updated AS category_updated 
FROM category 
WHERE category.id IN ($1::INTEGER)
2025-04-11 11:24:00,881 [INFO] [generated in 0.00015s] (8,)
2025-04-11 11:24:00,883 [INFO] SELECT sellers.id AS sellers_id, sellers.name AS sellers_name, sellers.description AS sellers_description, sellers.phone AS sellers_phone, sellers.address AS sellers_address, sellers.created AS sellers_created, sellers.updated AS sellers_updated 
FROM sellers 
WHERE sellers.id IN ($1::INTEGER)
2025-04-11 11:24:00,883 [INFO] [generated in 0.00015s] (1,)
2025-04-11 11:24:01,351 [INFO] ROLLBACK
2025-04-11 11:24:01,352 [INFO] Update id=734890291 is handled. Duration 475 ms by bot id=7443088052
2025-04-11 11:24:06,279 [INFO] Update id=734890292 is handled. Duration 131 ms by bot id=7443088052
2025-04-11 11:24:08,577 [INFO] BEGIN (implicit)
2025-04-11 11:24:08,577 [INFO] SELECT category.id, category.name, category.created, category.updated 
FROM category
2025-04-11 11:24:08,577 [INFO] [cached since 22.49s ago] ()
2025-04-11 11:24:08,710 [INFO] ROLLBACK
2025-04-11 11:24:08,711 [INFO] Update id=734890293 is handled. Duration 135 ms by bot id=7443088052
2025-04-11 11:24:10,142 [INFO] BEGIN (implicit)
2025-04-11 11:24:10,142 [INFO] SELECT sellers.id, sellers.name, sellers.description, sellers.phone, sellers.address, sellers.created, sellers.updated 
FROM sellers
2025-04-11 11:24:10,142 [INFO] [generated in 0.00011s] ()
2025-04-11 11:24:10,269 [INFO] ROLLBACK
2025-04-11 11:24:10,269 [INFO] Update id=734890294 is handled. Duration 128 ms by bot id=7443088052
2025-04-11 11:24:11,463 [INFO] Update id=734890295 is handled. Duration 123 ms by bot id=7443088052
2025-04-11 11:24:14,651 [INFO] Update id=734890296 is handled. Duration 155 ms by bot id=7443088052
2025-04-11 11:24:17,568 [INFO] Update id=734890297 is handled. Duration 133 ms by bot id=7443088052
2025-04-11 11:24:29,486 [INFO] Данные для обновления/добавления товара: {'name': 'ноут', 'description': 'ноут мой', 'category': 8, 'seller': 1, 'quantity': 23, 'price': Decimal('450.00'), 'purchase_price': Decimal('1.00'), 'image': 'AgACAgIAAxkBAAIC3mf2XyuEFgbpn_1EwHDbea4X8ogGAAJK7DEbJbK5Sw5JC768PWcVAQADAgADeQADNgQ'}
2025-04-11 11:24:29,486 [INFO] Обновляем товар с ID 4 данными: {'name': 'ноут', 'description': 'ноут мой', 'category': 8, 'seller': 1, 'quantity': 23, 'price': Decimal('450.00'), 'purchase_price': Decimal('1.00'), 'image': 'AgACAgIAAxkBAAIC3mf2XyuEFgbpn_1EwHDbea4X8ogGAAJK7DEbJbK5Sw5JC768PWcVAQADAgADeQADNgQ'}
2025-04-11 11:24:29,486 [INFO] BEGIN (implicit)
2025-04-11 11:24:29,487 [INFO] UPDATE product SET name=$1::VARCHAR, description=$2::VARCHAR, purchase_price=$3::NUMERIC(5, 2), price=$4::NUMERIC(5, 2), image=$5::VARCHAR, category_id=$6::INTEGER, seller_id=$7::INTEGER, quantity=$8::INTEGER, updated=now() WHERE product.id = $9::INTEGER
2025-04-11 11:24:29,487 [INFO] [generated in 0.00015s] ('ноут', 'ноут мой', 1.0, 450.0, 'AgACAgIAAxkBAAIC3mf2XyuEFgbpn_1EwHDbea4X8ogGAAJK7DEbJbK5Sw5JC768PWcVAQADAgADeQADNgQ', 8, 1, 23, 4)
2025-04-11 11:24:29,489 [INFO] COMMIT
2025-04-11 11:24:29,850 [INFO] Update id=734890298 is handled. Duration 365 ms by bot id=7443088052
